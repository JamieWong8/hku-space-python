/* Modular styles for the Analysis Dashboard (modal) */

:root {
  --kpi-bg: #f7f9fc;
  --kpi-text: #1f2a44;
  --kpi-accent: #2f80ed;
  --kpi-success: #10b981;
  --kpi-warning: #f6c000;
  --kpi-danger: #e74c3c;
}

.analysis-kpi-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}

@media (max-width: 992px) {
  .analysis-kpi-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 576px) {
  .analysis-kpi-grid { grid-template-columns: 1fr; }
}

.kpi-card {
  border-radius: 12px;
  padding: 14px 16px;
  background: var(--kpi-bg);
  border: 1px solid rgba(31, 42, 68, 0.12);
}

.kpi-card .kpi-title {
  display: flex; align-items: center; gap: 8px;
  font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.04em;
  color: #5b6576; margin-bottom: 4px;
}

.kpi-card .kpi-value {
  font-size: 1.8rem; font-weight: 700; color: var(--kpi-text);
}

.kpi-card .kpi-subtext {
  font-size: 0.78rem;
  color: #6d7789;
  margin-top: 6px;
  line-height: 1.35;
}

.kpi-card .kpi-flag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-top: 10px;
  padding: 2px 10px;
  border-radius: 999px;
  font-size: 0.68rem;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  background: rgba(47, 128, 237, 0.12);
  color: #1f2a44;
  border: 1px solid rgba(47, 128, 237, 0.28);
  font-weight: 600;
}

.kpi-invest[data-tier="invest"] .kpi-value { color: var(--kpi-success); }
.kpi-invest[data-tier="monitor"] .kpi-value { color: var(--kpi-warning); }
.kpi-invest[data-tier="avoid"] .kpi-value { color: var(--kpi-danger); }
.kpi-success-prob .kpi-value { color: var(--kpi-accent); }
.kpi-reco .kpi-value { color: var(--kpi-text); }
.kpi-risk .kpi-value { color: var(--kpi-danger); }
/* Risk-level overrides */
.kpi-risk.risk-low .kpi-value { color: var(--kpi-success); }
.kpi-risk.risk-medium .kpi-value { color: var(--kpi-warning); }
.kpi-risk.risk-high .kpi-value { color: var(--kpi-danger); }

.kpi-probability .kpi-value { color: var(--kpi-accent); }
.kpi-probability[data-band="high"] {
  border-color: rgba(16, 185, 129, 0.35);
  box-shadow: 0 0 0 1px rgba(16, 185, 129, 0.18) inset;
}
.kpi-probability[data-band="high"] .kpi-value { color: var(--kpi-success); }
.kpi-probability[data-band="moderate"] {
  border-color: rgba(246, 192, 0, 0.42);
  box-shadow: 0 0 0 1px rgba(246, 192, 0, 0.18) inset;
}
.kpi-probability[data-band="moderate"] .kpi-value { color: var(--kpi-warning); }
.kpi-probability[data-band="low"] {
  border-color: rgba(231, 76, 60, 0.4);
  box-shadow: 0 0 0 1px rgba(231, 76, 60, 0.16) inset;
}
.kpi-probability[data-band="low"] .kpi-value { color: var(--kpi-danger); }
.kpi-probability[data-band="unknown"] {
  border-color: rgba(31, 42, 68, 0.18);
}

.analysis-tabs .nav-link {
  color: #1f2a44;
  background: rgba(31,42,68,0.06);
  border: 1px solid rgba(31,42,68,0.12);
  margin-right: 6px;
}
.analysis-tabs .nav-link.active {
  color: #fff; background: #2f80ed; border-color: #2f80ed;
  box-shadow: 0 6px 18px rgba(47, 128, 237, 0.35);
}

.chart-card .card-header h5 { display: flex; align-items: center; gap: 8px; margin: 0; }
.chart-container { position: relative; min-height: 380px; }
.chart-container.lg { min-height: 420px; }

.panel-card .card-header { background: #f8fafc; font-weight: 600; }
.panel-card .table { font-size: 0.98rem; }
.panel-card .table tr th, .panel-card .table tr td { vertical-align: middle; }
.panel-card .table-striped > tbody > tr:nth-of-type(odd) > * { --bs-table-accent-bg: rgba(31,42,68,0.035); }

/* Accessibility focus outline */
.analysis-tabs .nav-link:focus-visible, .kpi-card:focus-visible, .panel-card .card:focus-visible, .chart-card .card:focus-visible {
  outline: 3px solid #2f80ed; outline-offset: 2px;
}

/* Tooltip cursor */
.info-icon { cursor: help; color: #6c757d; }
